name: fullstack

# Frontend
frontend:
  component: "@serverless/website"
  inputs:
    code: ./frontend

# Functions
createUser:
  component: "@serverless/aws-lambda"
  inputs:
    name: ${name}-create-user
    code: ./backend
    handler: index.createUser
getUsers:
  component: "@serverless/aws-lambda"
  inputs:
    name: ${name}-get-users
    code: ./backend
    handler: index.getUsers
auth:
  component: "@serverless/aws-lambda"
  inputs:
    name: ${name}-auth
    code: ./backend
    handler: index.auth

# REST API
restApi:
  component: "@serverless/aws-api-gateway"
  inputs:
    name: ${name}
    description: Serverless REST API
    endpoints:
      - path: /users
        method: POST
        function: ${comp:createUser.arn}
        authorizer: ${comp:auth.arn}
      - path: /users
        method: GET
        function: ${comp:getUsers.arn}
        authorizer: ${comp:auth.arn}
