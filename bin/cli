#!/usr/bin/env node

/*
 * Serverless Components â€“ Command Line Interface
 */

const args = require('minimist')(process.argv.slice(2))
const cli = require('../src/cli')
const { run } = require('../src')

// todo move to utils or CLI
// Set config from CLI input
const config = {}
config.stage = args.s || args.stage ? args.s || args.stage : 'dev'
config.instance = args._[1] || null
config.method = args._[0] || null
config.verbose = args.v || args.verbose ? args.v || args.verbose : false
config.debug = args.d || args.debug ? args.d || args.debug : false
config.watch = args.w || args.watch ? args.w || args.watch : false

// Run
;(async () => {
  return run(config, cli)
})().catch((e) => console.log(e.stack)) // eslint-disable-line
